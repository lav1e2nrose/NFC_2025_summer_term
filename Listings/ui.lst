C51 COMPILER V9.60.7.0   UI                                                                09/07/2025 15:25:27 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE UI
OBJECT MODULE PLACED IN .\Objects\ui.obj
COMPILER INVOKED BY: E:\Keil\C51\BIN\C51.EXE ui.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\ui.lst) T
                    -ABS(2) OBJECT(.\Objects\ui.obj)

line level    source

   1          #include "ui.h"
*** ERROR C202 IN LINE 8 OF oled.h: 'P1': undefined identifier
*** ERROR C202 IN LINE 9 OF oled.h: 'P1': undefined identifier
*** ERROR C202 IN LINE 10 OF oled.h: 'P1': undefined identifier
*** ERROR C202 IN LINE 11 OF oled.h: 'P1': undefined identifier
*** ERROR C141 IN LINE 16 OF ui.h: syntax error near 'card', expected ')'
   2          #include "bluetooth.h"
   3          
   4          /**
   5           * @brief 初始化用户界面
   6           */
   7          void UI_Init(void)
   8          {
   9   1          OLED_Init();       // 初始化OLED
  10   1          OLED_Clear();      // 清屏
  11   1          UI_ShowIdle();     // 显示空闲界面
  12   1      }
  13          
  14          /**
  15           * @brief 更新用户界面
  16           * @param status 当前状态
  17           */
  18          void UI_Update(u8 status)
  19          {
  20   1          static u8 last_status = 0xFF;
  21   1          
  22   1          // 如果状态没变，不更新
  23   1          if (status == last_status)
  24   1              return;
  25   1          
  26   1          OLED_Clear();  // 清屏
  27   1          
  28   1          switch (status)
  29   1          {
  30   2              case UI_IDLE:
  31   2                  UI_ShowIdle();
  32   2                  break;
  33   2              case UI_SENDING:
  34   2                  UI_ShowSending();
  35   2                  break;
  36   2              case UI_RECEIVED:
  37   2                  // 显示接收到的数据，需要在调用前设置好接收到的卡片数据
  38   2                  // UI_ShowReceived(receivedCard);
  39   2                  break;
  40   2              default:
  41   2                  UI_ShowIdle();
  42   2                  break;
  43   2          }
  44   1          
  45   1          last_status = status;  // 更新上一次状态
  46   1      }
  47          
  48          /**
  49           * @brief 显示空闲界面
C51 COMPILER V9.60.7.0   UI                                                                09/07/2025 15:25:27 PAGE 2   

  50           */
  51          void UI_ShowIdle(void)
  52          {
  53   1          OLED_ShowString(0, 0, "BT Card Transfer");
  54   1          OLED_ShowString(0, 2, "Status: Idle");
  55   1          OLED_ShowString(0, 4, "Press K1:Send");
  56   1          OLED_ShowString(0, 6, "Press K2:Recv");
  57   1      }
  58          
  59          /**
  60           * @brief 显示发送界面
  61           */
  62          void UI_ShowSending(void)
  63          {
  64   1          OLED_ShowString(0, 0, "BT Card Transfer");
  65   1          OLED_ShowString(0, 2, "Status: Sending");
  66   1          OLED_ShowString(0, 4, "Please wait...");
  67   1      }
  68          
  69          /**
  70           * @brief 显示接收到的数据
  71           * @param card 接收到的卡片数据
  72           */
  73          void UI_ShowReceived(CARD card)
  74          {
  75   1          u8 i;
  76   1          OLED_ShowString(0, 0, "Card Received");
  77   1          
  78   1          // 显示卡ID
  79   1          OLED_ShowString(0, 2, "ID:");
  80   1          for (i = 0; i < ID_LEN && i < 10; i++) {
  81   2              OLED_ShowChar(24 + i*8, 2, card.id[i]);
  82   2          }
  83   1          
  84   1          // 显示学生ID
  85   1          OLED_ShowString(0, 4, "Student ID:");
  86   1          for (i = 0; i < STUID_LEN && i < 10; i++) {
  87   2              OLED_ShowChar(0 + i*8, 6, card.stuid[i]);
  88   2          }
  89   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  5 ERROR(S)
